<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MySql数据库基础"><meta name="keywords" content="Mysql"><meta name="author" content="Pb2d"><meta name="copyright" content="Pb2d"><title>MySql数据库基础 | Pb2d's blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.8.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.8.2"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.8.2"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.1.1'
} </script><meta name="generator" content="Hexo 5.1.1"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">MySql数据库基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x00-%E5%89%8D%E8%A8%80"><span class="toc-number">1.0.1.</span> <span class="toc-text">0x00 前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x01-SQL%E5%9F%BA%E7%A1%80"><span class="toc-number">1.0.2.</span> <span class="toc-text">0x01 SQL基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%AE%9A%E4%B9%89"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">基本定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AE%9A%E4%B9%89"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">文件定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E5%8C%BA%E5%88%AB"><span class="toc-number">1.0.2.3.</span> <span class="toc-text">文本格式区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.0.2.4.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.0.2.5.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-amp-amp-%E6%93%8D%E4%BD%9C%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.2.6.</span> <span class="toc-text">基本语法&amp;&amp;操作语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">1.0.2.7.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit"><span class="toc-number">1.0.2.8.</span> <span class="toc-text">limit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#group-by-%E5%88%86%E7%BB%84"><span class="toc-number">1.0.2.9.</span> <span class="toc-text">group by:分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.0.2.10.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.0.2.11.</span> <span class="toc-text">多表连接查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.2.12.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E7%BC%96%E7%A0%81"><span class="toc-number">1.0.2.13.</span> <span class="toc-text">转换编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%87%8D%E5%A4%8D%E5%80%BC"><span class="toc-number">1.0.2.14.</span> <span class="toc-text">去重复值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E7%BB%93%E6%9E%9C%E9%9B%86"><span class="toc-number">1.0.2.15.</span> <span class="toc-text">合并结果集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.0.2.16.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.0.2.17.</span> <span class="toc-text">函数的应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.0.2.18.</span> <span class="toc-text">数据完整性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F-constraint"><span class="toc-number">1.0.2.19.</span> <span class="toc-text">约束:constraint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E4%BD%BF%E7%94%A8mysql"><span class="toc-number">1.0.2.20.</span> <span class="toc-text">在命令行中使用mysql</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x02-%E6%80%BB%E7%BB%93"><span class="toc-number">1.0.3.</span> <span class="toc-text">0x02 总结</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2020/09/15/C89cFMRYHupy6Vq.jpg"></div><div class="author-info__name text-center">Pb2d</div><div class="author-info__description text-center">做个烂人,终其一生。</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/Pb2d">Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">8</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">6</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.loli.net/2020/09/15/Op5hJ19ecuM4Azq.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Pb2d's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">MySql数据库基础</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-23</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Sql%E6%B3%A8%E5%85%A5/">Sql注入</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">3.7k</span><span class="post-meta__separator">|</span><span>阅读时长: 12 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="MySql数据库基础"><a href="#MySql数据库基础" class="headerlink" title="MySql数据库基础"></a>MySql数据库基础</h1><h3 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h3><p>MySql的应用还没有很系统的总结过，就花时间重新总结了一下，内容可能也不是太全面，如有不对的地方，还请各位师傅纠正。</p>
<h3 id="0x01-SQL基础"><a href="#0x01-SQL基础" class="headerlink" title="0x01 SQL基础"></a>0x01 SQL基础</h3><h4 id="基本定义"><a href="#基本定义" class="headerlink" title="基本定义"></a>基本定义</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">数据:是数据库总存储的基本对象</span><br><span class="line">定义:描述客观事物的符号记录</span><br><span class="line">种类:数字、文字、图形、图像、声音等</span><br><span class="line">数据库：DB 存储数据的集合</span><br><span class="line">数据库管理系统：DBMS</span><br><span class="line">	用户和操作系统之间的一层数据管理软件</span><br><span class="line">	科学地组织和存储数据、高效地获取和维护数据</span><br><span class="line">数据库系统：DBS</span><br><span class="line">	计算机系统中引入数据库后的系统</span><br><span class="line">数据库管理员：DBA</span><br><span class="line"></span><br><span class="line">SQL：数据库查询语言</span><br><span class="line">DDL：数据定义语言</span><br><span class="line">DQL：数据查询语言</span><br><span class="line">DML：数据操作语言</span><br><span class="line">DCL：数据控制语言</span><br><span class="line">TPL：事物处理语言</span><br><span class="line">CCL：指针控制语言</span><br><span class="line"></span><br><span class="line">数据库包括</span><br><span class="line">16张表</span><br><span class="line">7个视图</span><br><span class="line">3个存储过程</span><br><span class="line">3个数据库函数</span><br></pre></td></tr></table></figure>
<h4 id="文件定义"><a href="#文件定义" class="headerlink" title="文件定义"></a>文件定义</h4><p>建库建表后，在data目录下产生了对应文件，不同文件类型的作用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.frm 是描述表结构的文件 可以直接打开</span><br><span class="line">.MYD 是表达数据文件</span><br><span class="line">.MYI 是表数据文件中任何索引的数据树</span><br><span class="line">.opt 记录字符集和字符序</span><br><span class="line">.IBD 是MySQL数据文件、索引文件 也叫独立表空间</span><br><span class="line">	无法直接读取</span><br><span class="line">ibdata1 共享表空间</span><br><span class="line">undo 存储表空间</span><br><span class="line">.IDB 智能数据库系统 是一个对象数据库管理系统。</span><br><span class="line">.PAR 交换文件，主要是Windows环境下的文件名</span><br></pre></td></tr></table></figure>
<h4 id="文本格式区别"><a href="#文本格式区别" class="headerlink" title="文本格式区别"></a>文本格式区别</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">格式区别：</span><br><span class="line">	char 是一种固定长度的类型，适合用在身份证号码、手机号码等定常的格式</span><br><span class="line">	varchar 是一种可变长度的类型，适合用在长度可变的属性</span><br><span class="line">	text 不设置长度，当不知道属性的最大长度时，适合用text</span><br><span class="line">查询速度：char牺牲了空间效率换取了时间效率。</span><br><span class="line">	char 最快  存入的空格需要使用 trim()去除空格</span><br><span class="line">	varchar 次之</span><br><span class="line">	text 最慢</span><br></pre></td></tr></table></figure>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* 多行注释 *&#x2F;</span><br><span class="line"># 单行注释</span><br><span class="line">-- 单行注释(注意：两个但横线后面必须加空格)</span><br></pre></td></tr></table></figure>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>整形</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">​	tinyint、smallint、mediumint、int、bigint</span><br><span class="line">​	小整数值   大整数值   大整数值  大整数值  极大整数值</span><br></pre></td></tr></table></figure>
<p>浮点型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">​	float、double</span><br></pre></td></tr></table></figure>
<p>小数型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">​	decimal (常用：保证数据不丢失)</span><br><span class="line">​	如：100.32-----》decimal(5,2)</span><br></pre></td></tr></table></figure>
<p>字符型</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.char</span><br><span class="line">2.varchar</span><br><span class="line">3.text</span><br><span class="line">4.blob</span><br><span class="line">5.enum 枚举 （多选一）</span><br><span class="line">6.set （多选多）</span><br></pre></td></tr></table></figure>
<p>日期和时间</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.year </span><br><span class="line">2.date</span><br><span class="line">3.time</span><br><span class="line">4.datetime(5.5没有)</span><br><span class="line">5.timestamp 时间戳</span><br></pre></td></tr></table></figure>
<p>空和非空</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">空值 null 做为赋值可以用 &#x3D;  作为条件用is null进行判断</span><br><span class="line">非空 is not null 判断非空条件</span><br></pre></td></tr></table></figure>
<h4 id="基本语法-amp-amp-操作语句"><a href="#基本语法-amp-amp-操作语句" class="headerlink" title="基本语法&amp;&amp;操作语句"></a>基本语法&amp;&amp;操作语句</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create(创建)</span><br><span class="line">alter(更新)</span><br><span class="line">drop(删除)</span><br></pre></td></tr></table></figure>
<p>一次性删除一个表中所有的数据 包括日志</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure>
<p>选中或者使用该数据库 说明接下来的操作都是针对该数据库进行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use 数据库名称</span><br></pre></td></tr></table></figure>
<p>创建</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 创建数据库TestDB</span><br><span class="line">create database 数据库名;</span><br><span class="line"></span><br><span class="line"># 创建数据表</span><br><span class="line">create table 数据表名(</span><br><span class="line">	字段名 数据类型(长度) [其他值]，</span><br><span class="line">    字段名 数据类型(长度) [其他值]，</span><br><span class="line">    字段名 数据类型(长度) [其他值]，……</span><br><span class="line">);</span><br><span class="line">&#x2F;*</span><br><span class="line">create table 表名(</span><br><span class="line">字段名 类型 (长度) [是否为空] [有无默认值] [是否零填充] [是否无符号][约束设定]......</span><br><span class="line">);</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
<p>更改</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 在表中修改字段</span><br><span class="line">ALTER TABLE 表名 MODIFY 字段名 VARCHAR(64) not null;</span><br><span class="line"># 修改表名</span><br><span class="line">rename table 表名 to 新表名;</span><br><span class="line">alter table 表名 rename 新表名;</span><br><span class="line"></span><br><span class="line"># 修改列名</span><br><span class="line">alter table 表名 change 字段名 新字段名;</span><br><span class="line"></span><br><span class="line">#更改表中数据</span><br><span class="line">update 表名 set 字段&#x3D;值[,字段2&#x3D;值2，……] where 条件表达式</span><br></pre></td></tr></table></figure>
<p>删除</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 删除数据库</span><br><span class="line">drop database 数据库名;</span><br><span class="line"></span><br><span class="line"># 删除数据表</span><br><span class="line">drop table 数据表名</span><br><span class="line"></span><br><span class="line"># 数据删除语句</span><br><span class="line">delete from 表名 [where 条件表达式];</span><br><span class="line"></span><br><span class="line"># 删除一个表中的所有数据 重置为初始状态</span><br><span class="line"># truncate ：不会对日志进行操作</span><br><span class="line">truncate table 数据表名;</span><br><span class="line"></span><br><span class="line"># 删除表中字段</span><br><span class="line">ALTER TABLE 表名 DROP 字段名;</span><br></pre></td></tr></table></figure>
<p>添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 在表中添加字段</span><br><span class="line">ALTER TABLE 表名 ADD 字段名 字段数值参数;</span><br><span class="line"># 注意：向已经有数据的表中增加字段，建议该字段允许为空或设定默认值</span><br><span class="line"></span><br><span class="line"># 插入数据</span><br><span class="line">insert into 表名(字段列表) values (值列表);</span><br><span class="line"># 字段列表与值列表必须一一匹配（个数相同，顺序一致，类型兼容）</span><br><span class="line"># insert into 表名 values (),() 添加多条数据</span><br><span class="line"># 添加自动增长字段时，不添加可用defaul代替</span><br><span class="line"></span><br><span class="line">############添加数据来源于其他的表中############</span><br><span class="line"># 通过子查询添加数据 添加数据来源于其他表中</span><br><span class="line"># 这里不需要values</span><br><span class="line">INSERT into tc (select stu_name from stu_info);</span><br><span class="line"></span><br><span class="line"># 1.待添加数据的表存在的情况下 的语法</span><br><span class="line"> insert into 表名(字段列表) select 字段列表 from 表名 [where 条件表达式];</span><br><span class="line"> </span><br><span class="line"># 2. 待添加数据的表不存在的情况下的语法</span><br><span class="line"> create table 表名[(字段列表)] select 字段列表 from 表名 [where 条件表达式]；</span><br><span class="line"> </span><br><span class="line"># 不添加字段</span><br><span class="line"> create table 表名 select 字段列表 from 表名 [where 条件表达式]</span><br><span class="line"># 注意：平时创建表字段的时候字段名不相同会导致添加数据新建一个字段，需要通过as别名去改变字段的名字添加数据</span><br></pre></td></tr></table></figure>
<p>查询</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select 子句：需要查询什么信息</span><br><span class="line">from 子句：操作的数据源在哪儿</span><br><span class="line"></span><br><span class="line"># 查询数据</span><br><span class="line">select [字段名],[...] from 表名 [where 条件表达式];</span><br><span class="line"></span><br><span class="line"># 查询一个表中所有数据</span><br><span class="line">select * from 表名;</span><br></pre></td></tr></table></figure>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><p>排序方式：    升序——asc（默认：从小到大）    降序——desc（由大到小）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 排序语法：</span><br><span class="line">order by 字段1 [asc]|desc[,字段2 [adc]|desc,……]</span><br></pre></td></tr></table></figure>
<h4 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># limit 和排序结合起来用，取前面的多少条数据</span><br><span class="line"># 在limit后面只有一个数字时，表示在结果集中取前m条数据</span><br><span class="line"># 在limit后面有两个数字时，表示在结果集中取m+1开始取n条数据</span><br><span class="line">limit m[,n]</span><br><span class="line">select * form teachers order by tage desc limit 2;</span><br></pre></td></tr></table></figure>
<p>分页</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 分页</span><br><span class="line">limit (页码-1)*每页显示信息数，每页显示信息数;</span><br></pre></td></tr></table></figure>
<h4 id="group-by-分组"><a href="#group-by-分组" class="headerlink" title="group by:分组"></a>group by:分组</h4><p>Group By语句从英文的字面意义上理解就是“根据(by)一定的规则进行分组(Group)”。它的作用是通过一定的规则将一个数据集划分成若干个小的区域，然后针对若干个小区域进行数据处理。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># group by 字段名 having 条件表达式 分组查询</span><br><span class="line">select sName from elogs inner join students on sID &#x3D; sNo group by sNo having count(sid)&gt;&#x3D;2;</span><br><span class="line"></span><br><span class="line"># having 与 where 的不同之处</span><br><span class="line"># 1.执行顺序不同 having是在分组之后执行，where是在分组之前执行</span><br><span class="line"># 2.聚合函数的使用不同 having子句可以直接使用聚合函数，where子句不行</span><br><span class="line"></span><br><span class="line"># select 字段列表 from 表名 [where [条件表达式]] [group by 字段1,[字段2,……] [having 条件表达式]] [order by 字段1,[字段2,……] asc|[desc]][limit m,n];</span><br></pre></td></tr></table></figure>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>子查询是一种常用计算机语言SELECT-SQL语言中嵌套查询下层的程序模块。当一个查询是另一个查询的条件时，称之为子查询。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 子查询的用法</span><br><span class="line"># 在字段</span><br><span class="line">select (select cName from courses where cNo &#x3D; cID) as &#39;课程名称&#39;, count(elNo) from elogs GROUP BY cID;</span><br><span class="line"></span><br><span class="line"># 在表</span><br><span class="line">select * from courses where exists(</span><br><span class="line">	select * from (select sum(cCredit) as sumValue from courses where cNo in (</span><br><span class="line">		select cID from elogs where sID &#x3D;&#39;20180001&#39; and elScore &gt;&#x3D;60</span><br><span class="line">	)</span><br><span class="line">	)as A where sumValue&lt;10) ;</span><br></pre></td></tr></table></figure>
<h4 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h4><p>注意：使用连接技术建议将表经行重命名！</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># explain 检索连接是否达标</span><br><span class="line"># 内连接</span><br><span class="line"> # 语法1</span><br><span class="line">from 表1 inner join 表2 on 主键字段&#x3D;外键字段 [where 条件表达式]</span><br><span class="line"> # 语法2</span><br><span class="line"> from 表1,表2 where 主键字段&#x3D;外键字段 [ and 条件表达式]</span><br><span class="line"> # 三个表连接</span><br><span class="line">from 表1 inner join 表2 on 主键字段 &#x3D; 外键字段 inner join 表3 on 主键字段 &#x3D; 外键字段 [where 条件表达式];</span><br><span class="line"> </span><br><span class="line">from 表1,表2,表3 where 主键字段&#x3D;外键字段 and 主键字段 &#x3D; 外键字段 [ and 条件表达式];</span><br><span class="line"># 外连接outer join</span><br><span class="line"> # 左外连接 left outer join&#x2F;left join</span><br><span class="line"> # 右连接 right outer join&#x2F;right join</span><br></pre></td></tr></table></figure>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">max()	最大值</span><br><span class="line">min()	最小值</span><br><span class="line">avg()	平均值</span><br><span class="line">sum()	求和</span><br><span class="line">count()	符合条件数据的数目</span><br><span class="line"># 聚合函数不能嵌套使用</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 在统计时字段内没有满足条件的数值只有count返回数值0或者其他，而其余四个聚合函数返回null;</span><br><span class="line"># 对于聚合函数的参数，很多时候使用字段名来表示，那么这个时候，该字段内的null值不参与统计</span><br><span class="line">count(*)</span><br></pre></td></tr></table></figure>
<p>显示表中符合条件的信息数目，不考虑某字段出现null值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select count(cID),avg(elScore) from elogs;</span><br><span class="line">select count(elNo),avg(elScore) from elogs;</span><br><span class="line">select count(1),avg(elScore) from elogs;</span><br><span class="line">select count(*),avg(elScore) from elogs;</span><br></pre></td></tr></table></figure>
<h4 id="转换编码"><a href="#转换编码" class="headerlink" title="转换编码"></a>转换编码</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 中文排序想要通过拼英排序的话需要转换编码</span><br><span class="line">convert (tName using gbk)</span><br></pre></td></tr></table></figure>
<h4 id="去重复值"><a href="#去重复值" class="headerlink" title="去重复值"></a>去重复值</h4> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># distinct 后面如果有多个字段，则是针对这些字段值组合后的去重</span><br><span class="line"> select distinct sID from Elogs;</span><br><span class="line"># 先去重，再统计</span><br><span class="line">select count(distinct cID) from Elogs;</span><br><span class="line"># &#x3D;号只有确定了一个值才能用  多条值用in</span><br></pre></td></tr></table></figure>
<h4 id="合并结果集"><a href="#合并结果集" class="headerlink" title="合并结果集"></a>合并结果集</h4><p>对合并后的结果集中的重复数据也会自动去重</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select sName from students</span><br><span class="line">union</span><br><span class="line">select tName from Teachers;</span><br></pre></td></tr></table></figure>
<p>如果不想去重 则使用 union all</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select sName from students</span><br><span class="line">union all</span><br><span class="line">select tName from Teachers;</span><br></pre></td></tr></table></figure>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p>比较运算符：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;	大于</span><br><span class="line">&lt;	小于</span><br><span class="line">&gt;&#x3D;	大于等于</span><br><span class="line">&lt;&#x3D;	小于等于</span><br><span class="line">&#x3D; 	等于</span><br><span class="line">!&#x3D;	不等于</span><br></pre></td></tr></table></figure>
<p>范围运算符：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">between...and...(包含边界值) 类似于 &gt;&#x3D; and &lt;&#x3D;</span><br><span class="line">not between...and...(不包含边界值，表示不在指定范围内)</span><br></pre></td></tr></table></figure>
<p>集合运算符</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">in(满足集合中任意一个值，即满足条件，就是多个or表达式)类似于 &#x3D; or &#x3D;</span><br><span class="line">not in(取值不在这个集合中)</span><br><span class="line"></span><br><span class="line">外部大于内部，建议使用in</span><br><span class="line">内部大于外部，建议使用exists</span><br><span class="line">exists 判断是否存在</span><br><span class="line">如果内部查询有数据，则外部执行：否则外部不执行</span><br></pre></td></tr></table></figure>
<h4 id="函数的应用"><a href="#函数的应用" class="headerlink" title="函数的应用"></a>函数的应用</h4><p>字符串截取</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 从左边开始 第1个字符</span><br><span class="line">left(字段名,1)</span><br><span class="line"># 从那里开始，截取几个</span><br><span class="line">substring(字段名,1,1)</span><br></pre></td></tr></table></figure>
<p>str函数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 连接字符串</span><br><span class="line">concat(s1,s2,s3,……,sn);</span><br><span class="line">concat_WS(&#39;sep&#39;,s1,s2,s3,……,sn);</span><br><span class="line"># 去除字符串首部和尾部的所有空格</span><br><span class="line">TRIM(str)</span><br><span class="line"># 去除leading里面的字符。</span><br><span class="line">TRIM(leading &#39;x&#39;,str)</span><br><span class="line"># 返回字符串 str ，顺序和字符顺序相反。</span><br><span class="line">REVERSE(str) </span><br><span class="line"># 返回字符串 str ，结尾空格字符被删去。</span><br><span class="line">RTRIM(str) </span><br><span class="line"># 从字符串str中切掉开头的空格</span><br><span class="line">LTRIM(str)</span><br><span class="line"></span><br><span class="line"># 判断是否相等 相等返回1 不等返回0</span><br><span class="line">select strcmp (s1,s2) </span><br><span class="line"></span><br><span class="line"># 保留小数</span><br><span class="line">select format(字段，格式化保留位数) from 表名 where [条件表达式];</span><br><span class="line"></span><br><span class="line"># 返回字段长度  返回中文长度</span><br><span class="line">select char_length(str);</span><br><span class="line"></span><br><span class="line"># 返回右边</span><br><span class="line">select right (str,len);</span><br><span class="line"></span><br><span class="line"># 替换</span><br><span class="line">select insert (原字符串,起始字符,替换字符)</span><br><span class="line"></span><br><span class="line"># 字符串从左边截取</span><br><span class="line">select left(str,len);</span><br><span class="line"># 返回长度 返回中文字符长度  1个字符&#x3D; 3个字节</span><br><span class="line">select length(set)</span><br><span class="line"></span><br><span class="line"># 截取长度 字符串 起始位置 截取长度</span><br><span class="line">select mid(str,pos,len)</span><br><span class="line"></span><br><span class="line"># 截取长度</span><br><span class="line">select substring() 比较常用</span><br><span class="line"></span><br><span class="line"># 替换 字符串 被替换 替换</span><br><span class="line">select replace(str,from_str,to_str)</span><br><span class="line"></span><br><span class="line"># 全局</span><br><span class="line">global </span><br><span class="line"></span><br><span class="line"># 转义字符\在mysql当中同样可取 三种方法</span><br><span class="line">&quot;McDonald&#39;s&quot;</span><br><span class="line">&#39;McDonald\&#39;s&#39;</span><br><span class="line">&#39;McDonald&#39;&#39;s&#39;</span><br><span class="line"></span><br><span class="line"># group_concat 将指定字段值拼凑成一字符串，每个数值之间使用逗号分隔</span><br><span class="line">group_concat(字段[str]);</span><br></pre></td></tr></table></figure>
<p>日期函数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 查询星期几 由于索引是星期天开始，所以之后的需要加1</span><br><span class="line">select Dayofweek(&#39;2019-09-12&#39;);</span><br><span class="line"></span><br><span class="line"># 显示日期里面的值，后面的字符串表示 年月日时分秒都可</span><br><span class="line"># 大小写的值是不一样的</span><br><span class="line">date_format(date,format)</span><br><span class="line">select elDate,date_format(eldate,&#39;%y %m %d %h:%i:%s&#39;) from elogs</span><br><span class="line"></span><br><span class="line"># 返回过去的几天</span><br><span class="line">select DATE_SUB(Now(),INTERVAL 7 DAY);</span><br><span class="line"></span><br><span class="line"># 返回两个指定日期的时间和日期的边界天数</span><br><span class="line">select DATEDIFF(&#39;2019-09-12&#39;,&#39;2019-08-25&#39;);</span><br><span class="line"># 返回值：18</span><br></pre></td></tr></table></figure>
<h4 id="数据完整性"><a href="#数据完整性" class="headerlink" title="数据完整性"></a>数据完整性</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.域完整性:---------匹配完整性：非空、缺省</span><br><span class="line">字段&#x2F;列</span><br><span class="line"></span><br><span class="line">2.实体完整性:-------匹配完整性：主键、唯一键</span><br><span class="line">记录&#x2F;行</span><br><span class="line"></span><br><span class="line">3.引用完整性:-------匹配完整性：外键</span><br><span class="line">表与表之间</span><br></pre></td></tr></table></figure>
<h4 id="约束-constraint"><a href="#约束-constraint" class="headerlink" title="约束:constraint"></a>约束:constraint</h4><p>MySQL中的约束分类</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  主键:primary key</span><br><span class="line">  唯一键:unique</span><br><span class="line">  非空:not null</span><br><span class="line">  缺省:default</span><br><span class="line">  外键:foreign key</span><br><span class="line"></span><br><span class="line">主键、唯一键、外键都会自动创建索引</span><br><span class="line">主键:一个表只能有一个主键，其可以对应一个字段，也可以对应多个字段(组合主键)</span><br><span class="line">唯一键:也成为候选主键(跟主键的区别在于可以存储null值)</span><br><span class="line">外键:来源于主表的主键或唯一键(可允许为空，且其值必须在主表中出现过)</span><br></pre></td></tr></table></figure>
<p>创建约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constraint 约束名 约束类型(字段名) references 主表(主键字段或唯一键字段)</span><br></pre></td></tr></table></figure>
<p>创建外键约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constraint 约束名 foreign key(对应字段) references 主表(主键字段或唯一键字段)</span><br></pre></td></tr></table></figure>
<p>创建组合主键</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">primary key (字段1,字段2)</span><br></pre></td></tr></table></figure>
<p>对于已经存在的表，创建唯一键约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 add constraint 约束名 unique(字段名);</span><br></pre></td></tr></table></figure>
<p>删除约束的数据 先删除子表数据，再删除主表数据</p>
<p>级联删除</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">on delete cascade </span><br></pre></td></tr></table></figure>
<p>级联更新</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">on update cascade</span><br></pre></td></tr></table></figure>
<p>关掉mysql外键约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SET FOREIGN_KEY_CHECKS&#x3D;0;</span><br></pre></td></tr></table></figure>
<p>打开mysql外键约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT  @@FOREIGN_KEY_CHECKS;</span><br></pre></td></tr></table></figure>
<p>删除外键<br>注意：此语句在删除外键后不能关联删除该外键自动产生的约束</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 drop foreign key 外键名称;</span><br></pre></td></tr></table></figure>

<p>删除唯一键<br>注意：唯一键删除后对应的索引也会自动删除</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 drop index 唯一键字段名;</span><br></pre></td></tr></table></figure>

<p>删除指定名称的索引</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 drop index 索引名称;</span><br></pre></td></tr></table></figure>
<p>提醒：对于有主外关联的表，删除表中数据，如果无删除的级联操作，那么删除主表数据之前，必须先删除从表对应数据</p>
<h4 id="在命令行中使用mysql"><a href="#在命令行中使用mysql" class="headerlink" title="在命令行中使用mysql"></a>在命令行中使用mysql</h4><p>启动mysql服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure>
<p>停止mysql服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">net sotp mysql </span><br></pre></td></tr></table></figure>
<p>通过命令行进入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql -u 用户名 -p </span><br><span class="line">键入后会提示输入密码</span><br><span class="line">如果不能进入数据库就使用绝对路径或者配置环境变量</span><br></pre></td></tr></table></figure>
<p>查看数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>
<p>查看表：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show table;</span><br></pre></td></tr></table></figure>
<h3 id="0x02-总结"><a href="#0x02-总结" class="headerlink" title="0x02 总结"></a>0x02 总结</h3><p>数据库的应用多种多样，后面想到的都会写下来。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Pb2d</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://pb2d.github.io/2020/09/23/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/">https://pb2d.github.io/2020/09/23/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://pb2d.github.io">Pb2d's blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Mysql/">Mysql</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/10/13/frp-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"><i class="fa fa-chevron-left">  </i><span>frp内网穿透</span></a></div><div class="next-post pull-right"><a href="/2020/09/15/hello-world/"><span>不定时日记</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'false' == 'true';
var verify = 'false' == 'true';
var record_ip = 'false' == 'true';
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  recordIP:record_ip,
  appId:'rE3G4cRAQb3hOHQfOa59r7zr-MdYXbMMI',
  appKey:'FXdvNhx9LHn2kX6HUEVjLuuv',
  placeholder:'Just go go',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
})</script></div></div><footer class="footer-bg" style="background-image: url(https://i.loli.net/2020/09/15/Op5hJ19ecuM4Azq.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 By Pb2d</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.8.2"></script><script src="/js/fancybox.js?version=1.8.2"></script><script src="/js/sidebar.js?version=1.8.2"></script><script src="/js/copy.js?version=1.8.2"></script><script src="/js/fireworks.js?version=1.8.2"></script><script src="/js/transition.js?version=1.8.2"></script><script src="/js/scroll.js?version=1.8.2"></script><script src="/js/head.js?version=1.8.2"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="true"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>